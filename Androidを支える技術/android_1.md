# 第1章 AndroidとGUIシステムの基礎知識 モバイルプラットフォームの今と基本を知るために

## 1.1 Androidと最先端のモバイルGUIシステム 高まり続ける期待と要求

### 1.1.1 GUIシステムに対する要求は年々高まっている

Androidの先進的な環境

* マークアップによる記述と動的なツリーの操作
  * マークアップによる記述ってなんだ？
* システムのかなりの部分がJavaで書かれている
* IDEサポート
* 豊富なGUI部品と高機能なレイアウト
* 解像度非依存な記述
* GPUなどを活かした高速な半透明処理やアニメーション

## 1.2 AndroidのGUIシステムの全体像と変遷

### 1.2.1 AndroidのGUIシステムの全体像について

### 1.2.2 GUIシステムの基礎 Android初期からGBまで

GUIシステムには大きく3つのテーマがある

* イベント処理
  * InputManagerService
    * これが様々な入力デバイスのデバイスドライバからJavaの世界のイベントに変換して配信してくれる
  * メッセージループ
    * Looper
  * Handler
    * 別スレッドからUIスレッドに処理を頼む
* レイアウト
  * 4章
* 描画

### 1.2.3 ハードウェアアクセラレーションを用いた描画処理 HoneycombからICSで完成

OpenGLがどうのこうの。何を言ってるのかさっぱり。。

### 1.2.4 AOTコンパイルとprofile guided コンパイル LollipopからNougatまで

さまざまなコンパイル方法を組み合わせてうまいことやってるらしい

### 1.2.5 描画処理の概要

4,5,6章で説明する内容の関連を示している。

Viewツリーとレイアウトの話が4章。  
レイアウト済みViewツリーをDisplayListに変換して、OpenGL ESに渡すまでが5章。  
それ以降が6章。

## 1.3 [速習]本書で登場するAndroidの構成要素のうち、GUIシステム以外の部分 Activity, ActivityThread, プロパティ, Binder, システムサービス

### 1.3.1 Activity

Activityとは、画面を専有し何かの機能を提供する再利用の単位

Androidでは裏にいったActivityはkillされうる

onCreate() で作られたViewツリーがどうAndroidで処理されるは6.5.2で

### 1.3.2 ActivityThreadとmainスレッド

ActivityThreadは開発者はあまり意識しない。  
ActivityThreadがアプリのエントリーポイントになる。  
ActivityThreadの役割は主に3つで、

* UIスレッドとなるメッセージループを回す
* UIスレッドでActivityのライフサイクルに関する処理を行う
* アプリのプロセスのエントリーポイントとなるmain() メソッドを提供する

### 1.3.3 プロパティによる設定の管理

Androidでは、プロパティでシステムの設定を覚える

### 1.3.4 Binderとシステムサービス

Binderは、

* オブジェクトが動いているプロセス
* 実装されている言語（C++ or Java）

を気にせずにオブジェクトを呼び出す仕組み。

本書を読むに当たって知っておいたほうがいいBinderの仕組み
* ファイルディスクリプタを別のプロセスに送ることができる
* オブジェクトを転送するときにハンドルというint値がおくられるだけで、実体は送られない

