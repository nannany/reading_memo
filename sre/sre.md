# はじめに

* SRE（サイトリライアビリティエンジニアリング）とは何か？→エンジニア、システムの信頼性を向上させる者、運用について考慮する者

# 第Ⅰ部 イントロダクション

* 第Ⅰ部では、SREとは何か、そしてSREがIT業界における従来型手法と何が異なるかをみていく。

## 第1章 イントロダクション

### 1.1 サービス管理へのシステム管理者のアプローチ

* シスアドを用意することと、開発と運用を分断することの利点と欠点について
* 基本的に、開発は新しい機能を早くリリースしたい、運用は変更をしたくない、と考えているので対立する

## 1.2 サービス管理へのGoogleのアプローチ：サイトリライアビリティエンジニアリング

* SREチームにとってスキルセットの多様性は重要
* GoogleのSREチームでは運用にあてる作業時間を50%以下に抑えるように定めた
* SREチームのメンバー採用は、求めるものが高いため難しい

## 1.3 SREの信条

* 各SREチームの持つべき信条は同じ
* SREチームは、サービスの可用性、レイテンシ、パフォーマンス、効率性、変更管理、モニタリング、緊急対応、キャパシティプランニングに責任を持つ

### 1.3.1 エンジニアリングへの継続的な注力の保証

* SREが行う運用作業の量が50%を超過した場合、超過分を開発チームに差し戻す
* インシデント後にはポストモーテム（障害報告書みたいな）を書く
* SREチームと開発チームの関わりは https://qiita.com/san-tak/items/1e8a6aae062c5f6c4c64 の下のほうの図が分かりやすい

### 1.3.2 サービスのSLOを下回ることなく、変更の速度の最大化を追求する

* **100%を信頼性の目標とすることは、基本的にいかなる場合にも間違っている**という所見のもと、サービス障害を悪とみなさず、開発とSREの対立構造を解消する

### 1.3.3 モニタリング

* 人間に判断、解釈させるようなアラートを出してはならない
* 効果的なモニタリング出力には3種類ある

1. アラート：人間が即座にアクションを起こして対応し、状況を改善しなければならないことが生じていることを知らせる
2. チケット：人間がアクションを起こさねばならないことを知らせる（即座でなくてもよい）
3. ロギング：人間が見る必要がないもの。診断やフォレンジックに使用

### 1.3.4 緊急対応

* 緊急対応の評価にはMTTRを使う
* 人間の作業を介さないシステムが良い
* オンコールエンジニアの出番となった場合に備え、事前に十分な手順書を用意しておく

### 1.3.5 変更管理

* 70%のサービス障害は、動作中のシステム変更によっておこる
* 自動化で以下を実現することを目指すべき
  * 漸進的なロールアウトの実装
  * 高速かつ正確な問題の検出
  * 問題が生じた際の安全なロールバック

### 1.3.6 需要の予測とキャパシティプランニング

* 以下のステップでキャパシティプランニングを実施する
  * 自然な需要の正確な予測。この予測は、キャパシティのリソース確保に必要なリードタイムも踏まえる
  * 需要予測に突発的な需要の発生源を正確に織り込む
  * 計算リソースのキャパシティ（サーバー、ディスク等）とサービスのキャパシティの関連を把握するための、定期的なシステム負荷テスト

### 1.3.7 プロビジョニング

* プロビジョニングは変更管理とキャパシティプランニングの組み合わせ（？）
* プロビジョニングは素早くかつ必要な場合に、正確に行う
* プロビジョニングによって追加されたキャパシティが、正しく動作することも検証する

### 1.3.7 効率とパフォーマンス

* リソースの効率的な活用が、サービスのトータルコストに大きな影響を与える
* 特定のパフォーマンスを維持できるように、プロビジョニングを行うため、パフォーマンスの改善は大事

## 1.4 始まりの終わり

* これ以降、SREの詳細を見ていく


# 2章 SREの観点から見たGoogleのプロダクション環境

* Googleデータセンター特有の、問題・機会について説明し、本書全体で使われる用語について説明する

## 2.1 ハードウェア

* マシン：1つのハードウェア（あるいは1つのVM）
* サーバー：サービスを実装しているソフトウェア








# 5章 トイルの撲滅

## 5.1 トイルの定義

* 行わなければならない管理上の業務はトイルではなく、オーバーヘッド。チームミーティング、ゴールの設定・評価、人事事務作業等はオーバーヘッドにあたる
* 以下、当てはまるものが多ければトイルといえる
  * **手作業であること**
  * **繰り返されること** 
  * **自動化できること** 
  * **戦術的であること**：割込み作業。ページャーのアラートへの対応はトイルにあたる 
  * **長期的な価値を持たないこと** 
  * **サービスの成長に対してO(n)であること**

## 5.2 トイルは少ないほうが良い理由

* トイルは、確認せずに放っておくと全員の時間を100%使ってしまう傾向にあるため、GoogleではSREチームのトイル作業時間は50%以下としている

## 5.3 エンジニアリングであるための条件

* エンジニアリングの作業は、新しいことをするものであり、本質的に人間の判断を必要とする
* 典型的なSRE活動はおおむね以下のように分類できる
  * **ソフトウェアエンジニアリング**：コードの作成・修正を含む作業。関連する設計やドキュメントの作業もある
  * **システムエンジニアリング**：プロダクションシステムの設計・設定の変更、システムに関するドキュメント作成がふくまれ、1回の作業で改善効果が持続するような方法で行われる
  * **トイル**：サービスを稼働させることに直結する作業で、繰り返されたり、手作業だったりするもの
  * **オーバーヘッド**：サービスを稼働させることに直結はしない管理的作業

## 5.4 トイルは常に悪なのか？

* 多少のトイルはやむを得ない。トイルが少量であるならば問題ない
* トイルを大量に処理せねばならなくなるとつらい。以下のようなことは考えておくべき
  * **キャリアの停滞**：プロジェクトに使う時間があまりに少なくなると、キャリアアップが遅くなる
  * **モラルの低下**：あまりに多すぎるトイルは燃え尽き、倦怠、不満につながる
* トイルに時間を使いすぎると、SREの組織には以下のダメージが生じる
  * **混乱の発生**：SREはエンジニア組織であるよう皆は努力している。トイルをしすぎると、その努力を台無しにし、SREの職務について誤解を与えてしまう
  * **進捗速度の低下**
  * **習慣づけ**：あまりにトイルに取り組みすぎると、開発側からもっと依頼されてしまうかもしれない
  * **摩擦の発生**：自分はよくても、他のメンバーが大量のトイルに対して快く思っていない可能性がある
  * **信義違反**：トイルばかりだと、新規採用者、SRE新規参画者を欺くこととなる

## 5.5 まとめ

* イノベーションを増やし、トイルを減らそう

